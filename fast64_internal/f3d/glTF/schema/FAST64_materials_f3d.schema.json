{
    "$schema": "http://json-schema.org/draft-04/schema",
    "title": "FAST64_materials_f3d glTF Material Extension",
    "type": "object",
    "description": "glTF extension that provides a representation of fast64 F3D material data.",
    "allOf": [
        {
            "$ref": "glTFProperty.schema.json"
        }
    ],
    "properties": {
        "combiner": {
            "type": "object",
            "description": "The n64 color combiner lerp inputs",
            "properties": {
                "set": {
                    "type": "boolean",
                    "description": "When toggled the material should update the combiner lerp inputs"
                },
                "cycles": {
                    "type": "array",
                    "minItems": 1,
                    "maxItems": 2,
                    "description": "Can have one or two cycles depending on geometry mode.",
                    "items": {
                        "type": "object",
                        "properties": {
                            "color": {
                                "type": "array",
                                "minItems": 4,
                                "maxItems": 4,
                                "prefixItems": [
                                    {
                                        "type": "string",
                                        "default": "0",
                                        "enum": [
                                            "COMBINED",
                                            "TEXEL0",
                                            "TEXEL1",
                                            "PRIMITIVE",
                                            "SHADE",
                                            "ENVIRONMENT",
                                            "1",
                                            "NOISE",
                                            "0"
                                        ]
                                    },
                                    {
                                        "type": "string",
                                        "default": "0",
                                        "enum": [
                                            "COMBINED",
                                            "TEXEL0",
                                            "TEXEL1",
                                            "PRIMITIVE",
                                            "SHADE",
                                            "ENVIRONMENT",
                                            "CENTER",
                                            "K4",
                                            "0"
                                        ]
                                    },
                                    {
                                        "type": "string",
                                        "default": "0",
                                        "enum": [
                                            "COMBINED",
                                            "TEXEL0",
                                            "TEXEL1",
                                            "PRIMITIVE",
                                            "SHADE",
                                            "ENVIRONMENT",
                                            "SCALE",
                                            "COMBINED_ALPHA",
                                            "TEXEL0_ALPHA",
                                            "TEXEL1_ALPHA",
                                            "PRIMITIVE_ALPHA",
                                            "SHADE_ALPHA",
                                            "ENV_ALPHA",
                                            "LOD_FRACTION",
                                            "PRIM_LOD_FRAC",
                                            "K5",
                                            "0"
                                        ]
                                    },
                                    {
                                        "type": "string",
                                        "default": "0",
                                        "enum": [
                                            "COMBINED",
                                            "TEXEL0",
                                            "TEXEL1",
                                            "PRIMITIVE",
                                            "SHADE",
                                            "ENVIRONMENT",
                                            "1",
                                            "0"
                                        ]
                                    }
                                ]
                            },
                            "alpha": {
                                "type": "array",
                                "minItems": 4,
                                "maxItems": 4,
                                "prefixItems": [
                                    {
                                        "type": "string",
                                        "default": "0",
                                        "enum": [
                                            "COMBINED",
                                            "TEXEL0",
                                            "TEXEL1",
                                            "PRIMITIVE",
                                            "SHADE",
                                            "ENVIRONMENT",
                                            "1",
                                            "0"
                                        ]
                                    },
                                    {
                                        "type": "string",
                                        "default": "0",
                                        "enum": [
                                            "COMBINED",
                                            "TEXEL0",
                                            "TEXEL1",
                                            "PRIMITIVE",
                                            "SHADE",
                                            "ENVIRONMENT",
                                            "1",
                                            "0"
                                        ]
                                    },
                                    {
                                        "type": "string",
                                        "default": "0",
                                        "enum": [
                                            "LOD_FRACTION",
                                            "TEXEL0",
                                            "TEXEL1",
                                            "PRIMITIVE",
                                            "SHADE",
                                            "ENVIRONMENT",
                                            "PRIM_LOD_FRAC",
                                            "0"
                                        ]
                                    },
                                    {
                                        "type": "string",
                                        "default": "0",
                                        "enum": [
                                            "COMBINED",
                                            "TEXEL0",
                                            "TEXEL1",
                                            "PRIMITIVE",
                                            "SHADE",
                                            "ENVIRONMENT",
                                            "1",
                                            "0"
                                        ]
                                    }
                                ]
                            }
                        }
                    }
                }
            }
        },
        "environment": {
            "type": "object",
            "description": "The environment color, available in the combiner as the color inputs ENVIRONMENT and ENV_ALPHA",
            "properties": {
                "set": {
                    "type": "boolean",
                    "description": "When toggled the material should update the current environment color"
                },
                "color": {
                    "$ref": "color.schema.json"
                }
            }
        },
        "primitive": {
            "type": "object",
            "description": "The primitive color values, available in the combiner as the color inputs PRIMITIVE, PRIMITIVE_ALPHA and PRIM_LOD_FRAC",
            "properties": {
                "set": {
                    "type": "boolean",
                    "description": "When toggled the material should update the current primitive color"
                },
                "color": {
                    "$ref": "color.schema.json"
                },
                "minLoDRatio": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                },
                "loDFraction": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                }
            }
        },
        "chromaKey": {
            "type": "object",
            "description": "The chroma key values, available in the combiner as the color inputs CENTER and SCALE",
            "properties": {
                "set": {
                    "type": "boolean",
                    "description": "When toggled the material should update the chroma key values and set the h othermode for chroma keying (G_MDSFT_COMBKEY)"
                },
                "center": {
                    "description": "Defines the color intensity at which the key is active.",
                    "$ref": "solid_color.schema.json"
                },
                "scale": {
                    "type": "array",
                    "description": "For hard edge keying, set scale to maximum",
                    "items": {
                        "type": "number",
                        "minimum": 0.0,
                        "maximum": 1.0
                    },
                    "minItems": 3,
                    "maxItems": 3,
                    "default": [
                        0.0,
                        0.0,
                        0.0
                    ]
                },
                "width": {
                    "type": "array",
                    "description": "Size of half the key window. If width > 255, then keying is disabled for that channel",
                    "items": {
                        "type": "number",
                        "minimum": 0.0,
                        "maximum": 16.0
                    },
                    "minItems": 3,
                    "maxItems": 3,
                    "default": [
                        0.0,
                        0.0,
                        0.0
                    ]
                }
            }
        },
        "yuvConvert": {
            "type": "object",
            "description": "The yuv to rgb coefficients, available in the combiner as the color inputs K4 and K5",
            "properties": {
                "set": {
                    "type": "boolean",
                    "description": "When toggled the material should update the yuv to rgb coefficients and set the h othermode for texture conversion (G_TC_FILTCONV)"
                },
                "values": {
                    "type": "array",
                    "minItems": 6,
                    "maxItems": 6,
                    "items": {
                        "type": "number",
                        "minimum": -1.0,
                        "maximum": 1.0
                    },
                    "default": [
                        0.6863,
                        -0.1686,
                        -0.3490,
                        0.8706,
                        0.4475,
                        0.1647
                    ]
                }
            }
        },
        "fog": {
            "type": "object",
            "description": "The fog color and range",
            "properties": {
                "set": {
                    "type": "boolean",
                    "description": "When toggled the material should update the fog color and position"
                },
                "color": {
                    "$ref": "color.schema.json"
                },
                "range": {
                    "type": "array",
                    "items": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 65536
                    },
                    "minItems": 2,
                    "maxItems": 2,
                    "default": [
                        985,
                        1000
                    ]
                }
            }
        },
        "blend": {
            "type": "object",
            "description": "The blend color, used in the blenderer as the input G_BL_CLR_BL",
            "properties": {
                "set": {
                    "type": "boolean",
                    "description": "When toggled the material should update the current blend color"
                },
                "color": {
                    "$ref": "color.schema.json"
                }
            }
        },
        "lights": {
            "type": "object",
            "description": "The lighting data for the material",
            "properties": {
                "set": {
                    "type": "boolean",
                    "description": "When toggled the material should update the lighting data"
                },
                "lights": {
                    "$ref": "f3d_light.schema.json"
                },
                "ambientColor": {
                    "$ref": "color.schema.json",
                    "description": "Defaults to the main light's color divided by 4.672"
                }
            }
        },
        "geometryMode": {
            "type": "object",
            "properties": {
                "zBuffer": {
                    "type": "boolean",
                    "description": "Enables calculation of Z value for primitives. Disable if not reading or writing Z-Buffer in the blender",
                    "default": false
                },
                "shade": {
                    "type": "boolean",
                    "description": "EComputes shade coordinates for primitives. Disable if not using lighting, vertex colors or fog",
                    "default": false
                },
                "shadeSmooth": {
                    "type": "boolean",
                    "description": "Shades primitive smoothly using interpolation between shade values for each vertex (Gouraud shading)",
                    "default": false
                },
                "cullFront": {
                    "type": "boolean",
                    "description": "Cull front faces",
                    "default": false
                },
                "cullBack": {
                    "type": "boolean",
                    "description": "Cull back faces",
                    "default": false
                },
                "fog": {
                    "type": "boolean",
                    "description": "Turns on/off fog calculation. Fog variable gets stored into shade alpha",
                    "default": false
                },
                "lighting": {
                    "type": "boolean",
                    "description": "Enables calculating shade color using lights. Turn off for vertex colors as shade color",
                    "default": false
                },
                "texGen": {
                    "type": "boolean",
                    "description": "Generates texture coordinates for reflection mapping based on vertex normals and lookat direction. On a skybox texture, maps the sky to the center of the texture and the ground to a circle inscribed in the border. Requires lighting enabled to use",
                    "default": false
                },
                "texGenLinear": {
                    "type": "boolean",
                    "description": "Modifies the texgen mapping; enable with texgen. Use a normal panorama image for the texture, with the sky at the top and the ground at the bottom. Requires lighting enabled to use",
                    "default": false
                },
                "loD": {
                    "type": "boolean",
                    "description": "Not implemented in any known microcodes. No effect whether enabled or disabled",
                    "default": false
                }
            }
        },
        "otherModeH": {
            "type": "object",
            "properties": {
                "alphaDither": {
                    "type": "string",
                    "description": "Applies your choice dithering type to output framebuffer alpha. Dithering is used to convert high precision source colors into lower precision framebuffer values",
                    "default": "G_AD_DISABLE",
                    "enum": [
                        "G_AD_PATTERN",
                        "G_AD_NOTPATTERN",
                        "G_AD_NOISE",
                        "G_AD_DISABLE"
                    ]
                },
                "colorDither": {
                    "type": "string",
                    "description": "Applies your choice dithering type to output framebuffer color. Dithering is used to convert high precision source colors into lower precision framebuffer values",
                    "default": "G_CD_MAGICSQ",
                    "enum": [
                        "G_CD_MAGICSQ",
                        "G_CD_BAYER",
                        "G_CD_NOISE",
                        "G_CD_DISABLE",
                        "G_CD_ENABLE"
                    ]
                },
                "chromaKey": {
                    "type": "string",
                    "description": "Turns on/off the chroma key. Chroma key requires a special setup to work properly",
                    "default": "G_CK_NONE",
                    "enum": [
                        "G_CK_NONE",
                        "G_CK_KEY"
                    ]
                },
                "textureConvert": {
                    "type": "string",
                    "description": "Sets the function of the texture convert unit, to do texture filtering, YUV to RGB conversion, or both",
                    "default": "G_TC_CONV",
                    "enum": [
                        "G_TC_CONV",
                        "G_TC_FILTCONV",
                        "G_TC_FILT"
                    ]
                },
                "textureFilter": {
                    "type": "string",
                    "description": "Applies your choice of filtering to texels",
                    "default": "G_TF_POINT",
                    "enum": [
                        "G_TF_POINT",
                        "G_TF_AVERAGE",
                        "G_TF_BILERP"
                    ]
                },
                "textureLoD": {
                    "type": "string",
                    "description": "Turns on/off the use of LoD on textures. LoD textures change the used tile based on the texel/pixel ratio",
                    "default": "G_TL_TILE",
                    "enum": [
                        "G_TL_TILE",
                        "G_TL_LOD"
                    ]
                },
                "textureDetail": {
                    "type": "string",
                    "description": "Changes type of LoD usage. Affects how tiles are selected based on texel magnification. Only works when G_TL_LOD is selected",
                    "default": "G_TD_CLAMP",
                    "enum": [
                        "G_TD_CLAMP",
                        "G_TD_SHARPEN",
                        "G_TD_DETAIL"
                    ]
                },
                "perspectiveCorrection": {
                    "type": "string",
                    "description": "ATurns on/off texture perspective correction",
                    "default": "G_TP_NONE",
                    "enum": [
                        "G_TP_NONE",
                        "G_TP_PERSP"
                    ]
                },
                "cycleType": {
                    "type": "string",
                    "description": "Changes RDP pipeline configuration. For normal textured triangles use one or two cycle mode",
                    "default": "G_CYC_1CYCLE",
                    "enum": [
                        "G_CYC_1CYCLE",
                        "G_CYC_2CYCLES",
                        "G_CYC_COPY",
                        "G_CYC_FILL"
                    ]
                },
                "pipelineMode": {
                    "type": "string",
                    "description": "Changes primitive rasterization timing by adding syncs after tri draws.",
                    "default": "G_PM_1PASS",
                    "enum": [
                        "G_PM_1PRIMITIVE",
                        "G_PM_NPRIMITIVE"
                    ]
                }
            }
        },
        "other": {
            "type": "object",
            "properties": {
                "clipRatio": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 32767,
                    "default": 1
                },
                "mipmapCount": {
                    "type": "integer",
                    "minimum": 2,
                    "maximum": 8,
                    "default": 2
                }
            }
        },
        "textures": {
            "type": "object",
            "description": "Dict of texture info objects for each tile, could support up to 8 tiles in the future",
            "minItems": 0,
            "maxItems": 2,
            "additionalProperties": {
                "allOf": [
                    {
                        "$ref": "textureInfo.schema.json"
                    }
                ]
            }
        },
        "uvBasis": {
            "type": "integer",
            "default": 0,
            "minimum": 0,
            "maximum": 1
        },
        "large": {
            "type": "object",
            "description": "Settings for large textures, if property exits large texture mode is being used",
            "properties": {
                "edges": {
                    "type": "string",
                    "description": "Clamp outside image bounds or wrap outside image bounds (more expensive)",
                    "enum": [
                        "CLAMP",
                        "WRAP"
                    ],
                    "default": "CLAMP"
                }
            }
        },
        "extensions": {
            "type": "object",
            "properties": {
                "FAST64_materials_f3dlx": {
                    "$ref": "FAST64_materials_f3dlx.schema.json"
                },
                "FAST64_materials_f3dex3": {
                    "$ref": "FAST64_materials_f3dex3.schema.json"
                }
            }
        }
    },
    "additionalProperties": false
}